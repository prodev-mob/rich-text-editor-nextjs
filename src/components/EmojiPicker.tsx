import * as Popover from '@radix-ui/react-popover';
import { FaSmile } from 'react-icons/fa';
import { Editor, Transforms } from 'slate';
import { useState } from 'react';

// A large set of emojis
const EMOJIS = Array.from(new Set([
  'ðŸ˜€','ðŸ˜ƒ','ðŸ˜„','ðŸ˜','ðŸ˜†','ðŸ˜…','ðŸ˜‚','ðŸ¤£','ðŸ˜Š','ðŸ˜‡','ðŸ™‚','ðŸ™ƒ','ðŸ˜‰','ðŸ˜Œ','ðŸ˜','ðŸ¥°','ðŸ˜˜','ðŸ˜—','ðŸ˜™','ðŸ˜š',
  'ðŸ˜‹','ðŸ˜›','ðŸ˜','ðŸ˜œ','ðŸ¤ª','ðŸ¤¨','ðŸ§','ðŸ¤“','ðŸ˜Ž','ðŸ¥³','ðŸ¤©','ðŸ˜','ðŸ˜’','ðŸ˜ž','ðŸ˜”','ðŸ˜Ÿ','ðŸ˜•','ðŸ™','â˜¹ï¸','ðŸ˜£',
  'ðŸ˜–','ðŸ˜«','ðŸ˜©','ðŸ¥º','ðŸ˜¢','ðŸ˜­','ðŸ˜¤','ðŸ˜ ','ðŸ˜¡','ðŸ¤¬','ðŸ¤¯','ðŸ˜³','ðŸ¥µ','ðŸ¥¶','ðŸ˜±','ðŸ˜¨','ðŸ˜°','ðŸ˜¥','ðŸ˜“','ðŸ¤—',
  'ðŸ¤”','ðŸ¤­','ðŸ¤«','ðŸ¤¥','ðŸ˜¶','ðŸ˜','ðŸ˜‘','ðŸ˜¬','ðŸ™„','ðŸ˜¯','ðŸ˜¦','ðŸ˜§','ðŸ˜®','ðŸ˜²','ðŸ¥±','ðŸ˜´','ðŸ¤¤','ðŸ˜ª','ðŸ˜µ','ðŸ¤',
  'ðŸ¥´','ðŸ¤¢','ðŸ¤®','ðŸ¤§','ðŸ˜·','ðŸ¤’','ðŸ¤•','ðŸ¤‘','ðŸ¤ ','ðŸ˜ˆ','ðŸ‘¿','ðŸ‘¹','ðŸ‘º','ðŸ¤¡','ðŸ’©','ðŸ‘»','ðŸ’€','â˜ ï¸','ðŸ‘½','ðŸ‘¾',
  'ðŸ¤–','ðŸŽƒ','ðŸ˜º','ðŸ˜¸','ðŸ˜¹','ðŸ˜»','ðŸ˜¼','ðŸ˜½','ðŸ™€','ðŸ˜¿','ðŸ˜¾','ðŸ‘¶','ðŸ§’','ðŸ‘¦','ðŸ‘§','ðŸ§‘','ðŸ‘±â€â™‚ï¸','ðŸ‘±â€â™€ï¸','ðŸ‘¨','ðŸ‘©',
  'ðŸ§”','ðŸ‘´','ðŸ‘µ','ðŸ‘¨â€âš•ï¸','ðŸ‘©â€âš•ï¸','ðŸ‘¨â€ðŸŽ“','ðŸ‘©â€ðŸŽ“','ðŸ‘¨â€ðŸ«','ðŸ‘©â€ðŸ«','ðŸ‘¨â€âš–ï¸','ðŸ‘©â€âš–ï¸','ðŸ‘®â€â™‚ï¸','ðŸ‘®â€â™€ï¸','ðŸ•µï¸â€â™‚ï¸','ðŸ•µï¸â€â™€ï¸','ðŸ’‚â€â™‚ï¸','ðŸ’‚â€â™€ï¸','ðŸ¥·','ðŸ‘·â€â™‚ï¸','ðŸ‘·â€â™€ï¸',
  'ðŸ¤´','ðŸ‘¸','ðŸ‘³â€â™‚ï¸','ðŸ‘³â€â™€ï¸','ðŸ‘²','ðŸ§•','ðŸ¤µ','ðŸ‘°','ðŸ¤°','ðŸ¤±','ðŸ‘¼','ðŸŽ…','ðŸ¤¶','ðŸ¦¸â€â™‚ï¸','ðŸ¦¸â€â™€ï¸','ðŸ¦¹â€â™‚ï¸','ðŸ¦¹â€â™€ï¸','ðŸ§™â€â™‚ï¸','ðŸ§™â€â™€ï¸','ðŸ§šâ€â™‚ï¸',
  'ðŸ§šâ€â™€ï¸','ðŸ§›â€â™‚ï¸','ðŸ§›â€â™€ï¸','ðŸ§œâ€â™‚ï¸','ðŸ§œâ€â™€ï¸','ðŸ§â€â™‚ï¸','ðŸ§â€â™€ï¸','ðŸ§žâ€â™‚ï¸','ðŸ§žâ€â™€ï¸','ðŸ§Ÿâ€â™‚ï¸','ðŸ§Ÿâ€â™€ï¸','ðŸ’†â€â™‚ï¸','ðŸ’†â€â™€ï¸','ðŸ’‡â€â™‚ï¸','ðŸ’‡â€â™€ï¸','ðŸš¶â€â™‚ï¸','ðŸš¶â€â™€ï¸','ðŸƒâ€â™‚ï¸','ðŸƒâ€â™€ï¸','ðŸ’ƒ',
  'ðŸ•º','ðŸ§—â€â™‚ï¸','ðŸ§—â€â™€ï¸','ðŸ„â€â™‚ï¸','ðŸ„â€â™€ï¸','ðŸŠâ€â™‚ï¸','ðŸŠâ€â™€ï¸','ðŸ¤½â€â™‚ï¸','ðŸ¤½â€â™€ï¸','ðŸš´â€â™‚ï¸','ðŸš´â€â™€ï¸','ðŸšµâ€â™‚ï¸','ðŸšµâ€â™€ï¸','ðŸ¤¹â€â™‚ï¸','ðŸ¤¹â€â™€ï¸','ðŸ›€','ðŸ›Œ','ðŸ§˜â€â™‚ï¸','ðŸ§˜â€â™€ï¸','ðŸ¦½',
  'ðŸ¦¼','ðŸ›¹','ðŸ›·','ðŸ¥Œ','ðŸŽ¯','ðŸ¹','ðŸŽ£','ðŸ¤¿','ðŸ¥Š','ðŸ¥‹','ðŸŽ½','â›¸ï¸','ðŸŽ¿','â›·ï¸','ðŸ‚','ðŸ‹ï¸â€â™‚ï¸','ðŸ‹ï¸â€â™€ï¸','ðŸ¤º','ðŸ¤¼â€â™‚ï¸',
  'ðŸ¤¼â€â™€ï¸','ðŸ¤¸â€â™‚ï¸','ðŸ¤¸â€â™€ï¸','ðŸ¤¾â€â™‚ï¸','ðŸ¤¾â€â™€ï¸','ðŸ¤¹','ðŸ§—','ðŸ§˜','ðŸ‡','ðŸ§–â€â™‚ï¸','ðŸ§–â€â™€ï¸','ðŸ›¶','ðŸš£â€â™‚ï¸','ðŸš£â€â™€ï¸','ðŸŽï¸','ðŸï¸','ðŸ›µ','ðŸš²','ðŸ›´','ðŸš¨',
  'â¤ï¸','ðŸ’›','ðŸ’š','ðŸ’™','ðŸ’œ','ðŸ–¤','ðŸ¤','ðŸ¤Ž','ðŸ’”','â£ï¸','ðŸ’•','ðŸ’ž','ðŸ’“','ðŸ’—','ðŸ’–','ðŸ’˜','ðŸ’','ðŸ’Ÿ','â˜®ï¸','âœï¸',
  'â˜ªï¸','ðŸ•‰ï¸','â˜¸ï¸','âœ¡ï¸','ðŸ”¯','â˜¯ï¸','ðŸ•Ž','â˜¦ï¸','ðŸ›','â›Ž','â™ˆ','â™‰','â™Š','â™‹','â™Œ','â™','â™Ž','â™','â™','â™‘','â™’','â™“',
  'ðŸŒž','ðŸŒ','ðŸŒ›','ðŸŒœ','ðŸŒš','ðŸŒ•','ðŸŒ–','ðŸŒ—','ðŸŒ˜','ðŸŒ‘','ðŸŒ’','ðŸŒ“','ðŸŒ”','ðŸŒ™','ðŸŒŽ','ðŸŒ','ðŸŒ','ðŸ’«','â­','ðŸŒŸ','âœ¨','âš¡','ðŸ”¥',
  'ðŸ’¥','â˜„ï¸','ðŸŒªï¸','ðŸŒˆ','â˜€ï¸','ðŸŒ¤ï¸','â›…','ðŸŒ¥ï¸','ðŸŒ¦ï¸','ðŸŒ§ï¸','â›ˆï¸','ðŸŒ©ï¸','ðŸŒ¨ï¸','â„ï¸','â˜ƒï¸','â›„','ðŸŒ¬ï¸','ðŸ’¨','ðŸ’§','ðŸ’¦',
  'ðŸŒŠ','ðŸŒ«ï¸','ðŸ','ðŸŽ','ðŸ','ðŸŠ','ðŸ‹','ðŸŒ','ðŸ‰','ðŸ‡','ðŸ“','ðŸ«','ðŸˆ','ðŸ’','ðŸ‘','ðŸ¥­','ðŸ','ðŸ¥¥','ðŸ¥','ðŸ…','ðŸ†','ðŸ¥‘','ðŸ¥¦','ðŸ¥¬','ðŸ¥’','ðŸŒ¶ï¸','ðŸ«‘','ðŸŒ½','ðŸ¥•','ðŸ«’','ðŸ§„','ðŸ§…','ðŸ¥”','ðŸ ','ðŸ¥','ðŸ¥¯','ðŸž','ðŸ¥–','ðŸ¥¨','ðŸ§€','ðŸ¥š','ðŸ³','ðŸ§ˆ','ðŸ¥ž','ðŸ§‡','ðŸ¥“','ðŸ¥©','ðŸ—','ðŸ–','ðŸ¦´','ðŸŒ­','ðŸ”','ðŸŸ','ðŸ•','ðŸ¥ª','ðŸ¥™','ðŸŒ®','ðŸŒ¯','ðŸ«”','ðŸ¥—','ðŸ¥˜','ðŸ²','ðŸ«•','ðŸ¥«','ðŸ','ðŸœ','ðŸ›','ðŸ£','ðŸ±','ðŸ¥Ÿ','ðŸ¦ª','ðŸ¤','ðŸ™','ðŸš','ðŸ˜','ðŸ¥','ðŸ¥ ','ðŸ¥®','ðŸ¢','ðŸ¡','ðŸ§','ðŸ¨','ðŸ¦','ðŸ¥§','ðŸ§','ðŸ°','ðŸŽ‚','ðŸ®','ðŸ­','ðŸ¬','ðŸ«','ðŸ¿','ðŸ§‚',
]));


interface EmojiPickerProps {
  editor: Editor;
}

const EmojiPicker = ({ editor }: EmojiPickerProps) => {
  const [open, setOpen] = useState(false);

  const handleEmojiSelect = (emoji: string) => {
    Transforms.insertText(editor, emoji);
    setOpen(false);
  };

  return (
    <Popover.Root open={open} onOpenChange={setOpen}>
      <Popover.Trigger asChild>
        <button className="p-2 hover:bg-gray-100 rounded cursor-pointer" title="Insert Emoji">
          <FaSmile className="w-4 h-4" />
        </button>
      </Popover.Trigger>
      <Popover.Content className="bg-white p-2 rounded-lg shadow-lg grid grid-cols-5 gap-2 max-h-48 overflow-y-auto">
        {EMOJIS.map((emoji) => (
          <button
            key={emoji}
            className="text-xl hover:bg-gray-100 rounded p-1 cursor-pointer"
            onClick={() => handleEmojiSelect(emoji)}
          >
            {emoji}
          </button>
        ))}
      </Popover.Content>
    </Popover.Root>
  );
};

export default EmojiPicker;
